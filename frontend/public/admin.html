<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ë¦¬ì í˜ì´ì§€ - Russian.Town</title>
    <link rel="icon" href="data:,">
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css');

        :root {
            --admin-primary: #7C3AED;
            --admin-secondary: #A78BFA;
            --admin-dark: #5B21B6;
            --russian-red: #DA020E;
            --russian-blue: #0039A6;
            --russian-gold: #D4AF37;
            --gradient-admin: linear-gradient(135deg, #7C3AED 0%, #A78BFA 100%);
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.16);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            font-size: 12px;
            line-height: 1.5;
            color: #2c3e50;
            background: linear-gradient(to bottom, #f8f9fa 0%, #f3f4f6 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 10px;
        }

        /* í—¤ë” - index.htmlê³¼ ë™ì¼í•˜ë‚˜ ê´€ë¦¬ì ìƒ‰ìƒ */
        .header {
            background: var(--gradient-admin);
            box-shadow: var(--shadow-md);
            padding: 12px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
        }

        .logo {
            font-size: 26px;
            font-weight: 700;
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: transform 0.3s ease;
        }

        .logo:hover {
            transform: translateY(-2px);
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--admin-primary), var(--admin-secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            border: 3px solid white;
        }

        .admin-badge {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            border: 2px solid white;
            box-shadow: var(--shadow-sm);
        }

        /* íƒ­ ë©”ë‰´ */
        .tabs {
            background: white;
            margin-top: 15px;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            gap: 10px;
            border-bottom: 3px solid #e0e0e0;
            box-shadow: var(--shadow-sm);
        }

        .tab-btn {
            padding: 10px 24px;
            border: 2px solid transparent;
            background: white;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #666;
            border-radius: 8px;
            transition: all 0.3s ease;
            position: relative;
        }

        .tab-btn:hover {
            background: #f8f9fa;
            color: var(--admin-primary);
            border-color: var(--admin-secondary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .tab-btn.active {
            background: var(--gradient-admin);
            color: white;
            border-color: var(--admin-primary);
            box-shadow: var(--shadow-md);
        }

        /* ì½˜í…ì¸  ì˜ì—­ */
        .tab-content {
            display: none;
            background: white;
            margin-top: 10px;
            border-radius: 5px;
            padding: 15px;
        }

        .tab-content.active {
            display: block;
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--russian-blue);
        }

        /* í…Œì´ë¸” */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
        }

        .data-table th {
            background: #f8f9fa;
            padding: 6px 8px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid #e0e0e0;
            font-size: 11px;
        }

        .data-table td {
            padding: 6px 8px;
            border-bottom: 1px solid #f0f0f0;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        .status-deleted {
            color: #999;
            text-decoration: line-through;
        }

        .status-badge {
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: 600;
        }

        .badge-reported {
            background: #fff3cd;
            color: #856404;
        }

        .badge-deleted {
            background: #f8d7da;
            color: #721c24;
        }

        .badge-normal {
            background: #d4edda;
            color: #155724;
        }

        /* ë²„íŠ¼ */
        .action-btn {
            padding: 4px 10px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 3px;
            cursor: pointer;
            font-size: 10px;
            margin-right: 4px;
        }

        .action-btn:hover {
            background: #f8f9fa;
        }

        .btn-restore {
            color: var(--russian-blue);
            border-color: var(--russian-blue);
        }

        .btn-delete {
            color: var(--russian-red);
            border-color: var(--russian-red);
        }

        .btn-ignore {
            color: #666;
        }

        /* íšŒì› ìœ í˜• íƒ­ */
        .user-type-tab {
            padding: 12px 24px;
            border: none;
            background: transparent;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #6b7280;
            transition: all 0.2s;
        }

        .user-type-tab:hover {
            color: var(--admin-primary);
            background: rgba(124, 58, 237, 0.05);
        }

        .user-type-tab.active {
            color: var(--admin-primary);
            border-bottom-color: var(--admin-primary);
            font-weight: 700;
        }

        .report-detail {
            font-size: 10px;
            color: #666;
            margin-top: 4px;
        }

        .report-reason {
            color: var(--russian-red);
            font-weight: 600;
        }

        /* í†µê³„ ì¹´ë“œ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            padding: 15px;
            text-align: center;
        }

        .stat-label {
            font-size: 11px;
            color: #666;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--russian-blue);
        }

        .stat-card.warning .stat-value {
            color: var(--russian-red);
        }

        /* ì‚¬ì´ë“œë°” */
        .main-layout {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .sidebar {
            width: 238px;
            flex-shrink: 0;
        }

        .content-area {
            flex: 1;
        }

        .sidebar-section {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .sidebar-header {
            background: #f8f9fa;
            border-bottom: 1px solid #e0e0e0;
            padding: 6px 10px;
            font-size: 11px;
            font-weight: 600;
            color: #333;
        }

        .sidebar-menu {
            padding: 4px 0;
        }

        .sidebar-item {
            display: block;
            padding: 6px 10px;
            color: #666;
            text-decoration: none;
            font-size: 11px;
            transition: background 0.2s;
        }

        .sidebar-item:hover {
            background: #f0f0f0;
        }

        .sidebar-item.active {
            background: #e3f2fd;
            color: var(--russian-blue);
            font-weight: 600;
        }

        .russian-text {
            font-size: 9px;
            color: #999;
            margin-top: 1px;
        }

        /* ëª¨ë‹¬ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 8px;
            width: 600px;
            max-width: 90vw;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .modal-header {
            background: var(--russian-blue);
            color: white;
            padding: 15px 20px;
            border-radius: 8px 8px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 16px;
            font-weight: 600;
        }

        .modal-close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-body {
            padding: 20px;
        }

        .detail-row {
            margin-bottom: 15px;
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 15px;
        }

        .detail-row:last-child {
            border-bottom: none;
        }

        .detail-label {
            font-size: 11px;
            color: #666;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .detail-value {
            font-size: 13px;
            color: #333;
        }

        .detail-content {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 4px;
            white-space: pre-wrap;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <!-- í—¤ë” -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="/index.html" class="logo">
                    <div class="logo-icon">âš™ï¸</div>
                    <span>Russian.Town</span>
                </a>
                <div style="display: flex; align-items: center; gap: 15px;">
                    <a href="/index.html" style="text-decoration: none; color: white; font-size: 13px; padding: 8px 16px; background: rgba(255, 255, 255, 0.2); border: 2px solid white; border-radius: 20px; transition: all 0.3s; font-weight: 600;">
                        ğŸ  <span style="margin-left: 4px;">í™ˆìœ¼ë¡œ ê°€ê¸°</span>
                    </a>
                    <div class="admin-badge">ğŸ” ê´€ë¦¬ì ëª¨ë“œ</div>
                    <button onclick="handleLogout()" style="text-decoration: none; color: white; font-size: 13px; padding: 8px 16px; background: rgba(220, 38, 38, 0.8); border: 2px solid white; border-radius: 20px; transition: all 0.3s; font-weight: 600; cursor: pointer;">
                        ğŸšª <span style="margin-left: 4px;">ë¡œê·¸ì•„ì›ƒ</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <div class="container">
        <div class="content-area" style="max-width: 1400px; margin: 0 auto; padding: 0 10px;">
        <!-- í†µê³„ -->
        <div class="stats-grid" style="margin-top: 10px;">
            <div class="stat-card">
                <div class="stat-label">ì „ì²´ ê²Œì‹œê¸€</div>
                <div class="stat-value">1,247</div>
            </div>
            <div class="stat-card warning">
                <div class="stat-label">ì‚­ì œëœ ê²Œì‹œê¸€</div>
                <div class="stat-value">35</div>
            </div>
            <div class="stat-card warning">
                <div class="stat-label">ì‹ ê³ ëœ ê²Œì‹œê¸€</div>
                <div class="stat-value">8</div>
            </div>
            <div class="stat-card warning">
                <div class="stat-label">ì‹ ê³ ëœ ëŒ“ê¸€</div>
                <div class="stat-value">12</div>
            </div>
        </div>

        <!-- íƒ­ ë©”ë‰´ -->
        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('dashboard')">ğŸ“Š ëŒ€ì‹œë³´ë“œ</button>
            <button class="tab-btn" onclick="showTab('users')">ğŸ‘¥ íšŒì›ê´€ë¦¬</button>
            <button class="tab-btn" onclick="showTab('posts')">ğŸ“ ê²Œì‹œíŒê´€ë¦¬</button>
            <button class="tab-btn" onclick="showTab('stats')">ğŸ“ˆ í†µê³„</button>
            <button class="tab-btn" onclick="showTab('system-settings')">âš™ï¸ ì„¤ì •</button>
            <button class="tab-btn" onclick="showTab('reports')">ğŸš¨ ì‹ ê³ ê´€ë¦¬</button>
        </div>

        <!-- ì‹ ê³ ëœ ê²Œì‹œê¸€ -->
        <div id="reported-posts" class="tab-content">
            <div class="section-title">ì‹ ê³ ëœ ê²Œì‹œê¸€ ê´€ë¦¬</div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th style="width: 60px;">ë²ˆí˜¸</th>
                        <th style="width: 100px;">ê²Œì‹œíŒ</th>
                        <th>ì œëª©</th>
                        <th style="width: 100px;">ì‘ì„±ì</th>
                        <th style="width: 120px;">ì‹ ê³ ì‚¬ìœ </th>
                        <th style="width: 100px;">ì‹ ê³ ì¼ì‹œ</th>
                        <th style="width: 80px;">ìƒíƒœ</th>
                        <th style="width: 150px;">ê´€ë¦¬</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>2546</td>
                        <td>ììœ ê²Œì‹œíŒ</td>
                        <td><a href="/board-view.html">ì—¬ê¸°ì„œ ë¬¼ê±´ ì‚¬ê³ íŒŒëŠ” ì‚¬ëŒë“¤ ì¡°ì‹¬í•˜ì„¸ìš”</a></td>
                        <td>Ğ˜Ğ²Ğ°Ğ½</td>
                        <td><span class="report-reason">ìŠ¤íŒ¸/ê´‘ê³ </span><br><span class="report-detail">ì¤‘ë³µ ê²Œì‹œë¬¼</span></td>
                        <td>2025.10.01 13:20</td>
                        <td><span class="status-badge badge-reported">ì‹ ê³ ë¨</span></td>
                        <td>
                            <button class="action-btn btn-delete" onclick="handleDeletePost(2546)">ì‚­ì œ</button>
                            <button class="action-btn btn-ignore" onclick="handleIgnoreReport(2546, 'post')">ë¬´ì‹œ</button>
                        </td>
                    </tr>
                    <tr>
                        <td>2543</td>
                        <td>ììœ ê²Œì‹œíŒ</td>
                        <td><a href="/board-view.html">ì´ê±° ì™„ì „ ì‚¬ê¸°ì…ë‹ˆë‹¤!!! ì¡°ì‹¬í•˜ì„¸ìš”!</a></td>
                        <td>ë°•ì§€ì˜</td>
                        <td><span class="report-reason">ìš•ì„¤/ë¹„ë°©</span><br><span class="report-detail">íŠ¹ì •ì¸ ë¹„ë°©</span></td>
                        <td>2025.10.01 11:45</td>
                        <td><span class="status-badge badge-reported">ì‹ ê³ ë¨</span></td>
                        <td>
                            <button class="action-btn btn-delete" onclick="handleDeletePost(2543)">ì‚­ì œ</button>
                            <button class="action-btn btn-ignore" onclick="handleIgnoreReport(2543, 'post')">ë¬´ì‹œ</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- ì‹ ê³ ëœ ëŒ“ê¸€ -->
        <div id="reported-comments" class="tab-content">
            <div class="section-title">ì‹ ê³ ëœ ëŒ“ê¸€ ê´€ë¦¬</div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th style="width: 60px;">ë²ˆí˜¸</th>
                        <th>ëŒ“ê¸€ ë‚´ìš©</th>
                        <th style="width: 100px;">ì‘ì„±ì</th>
                        <th style="width: 100px;">ê²Œì‹œê¸€</th>
                        <th style="width: 120px;">ì‹ ê³ ì‚¬ìœ </th>
                        <th style="width: 100px;">ì‹ ê³ ì¼ì‹œ</th>
                        <th style="width: 80px;">ìƒíƒœ</th>
                        <th style="width: 150px;">ê´€ë¦¬</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>15234</td>
                        <td>ì´ëŸ° ì“°ë ˆê¸° ê°™ì€ ì •ë³´ëŠ” í•„ìš”ì—†ì–´ìš”. ê´‘ê³ í•˜ì§€ ë§ˆì„¸ìš”.</td>
                        <td>Ğ’Ğ»Ğ°Ğ´Ğ¸Ğ¼Ğ¸Ñ€</td>
                        <td><a href="/board-view.html">ì€í–‰ê³„ì¢Œ ê°œì„¤...</a></td>
                        <td><span class="report-reason">ìš•ì„¤/ë¹„ë°©</span><br><span class="report-detail">ë¶€ì ì ˆí•œ í‘œí˜„</span></td>
                        <td>2025.10.01 14:10</td>
                        <td><span class="status-badge badge-reported">ì‹ ê³ ë¨</span></td>
                        <td>
                            <button class="action-btn btn-delete" onclick="handleDeleteComment(15234)">ì‚­ì œ</button>
                            <button class="action-btn btn-ignore" onclick="handleIgnoreReport(15234, 'comment')">ë¬´ì‹œ</button>
                        </td>
                    </tr>
                    <tr>
                        <td>15198</td>
                        <td>ì—¬ê¸° ì „í™”í•˜ë©´ ë°”ë¡œ í•´ê²°ë©ë‹ˆë‹¤ 010-1234-5678</td>
                        <td>ê¹€ì² ìˆ˜</td>
                        <td><a href="/board-view.html">ë¹„ì ì—°ì¥ ë¬¸ì˜...</a></td>
                        <td><span class="report-reason">ê°œì¸ì •ë³´ ë…¸ì¶œ</span><br><span class="report-detail">ì „í™”ë²ˆí˜¸ ê³µê°œ</span></td>
                        <td>2025.10.01 12:30</td>
                        <td><span class="status-badge badge-reported">ì‹ ê³ ë¨</span></td>
                        <td>
                            <button class="action-btn btn-delete" onclick="handleDeleteComment(15198)">ì‚­ì œ</button>
                            <button class="action-btn btn-ignore" onclick="handleIgnoreReport(15198, 'comment')">ë¬´ì‹œ</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- ì‚­ì œëœ ê²Œì‹œê¸€ -->
        <div id="deleted-posts" class="tab-content">
            <div class="section-title">ì‚­ì œëœ ê²Œì‹œê¸€ ê´€ë¦¬</div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th style="width: 60px;">ë²ˆí˜¸</th>
                        <th style="width: 100px;">ê²Œì‹œíŒ</th>
                        <th>ì œëª©</th>
                        <th style="width: 100px;">ì‘ì„±ì</th>
                        <th style="width: 100px;">ì‚­ì œì</th>
                        <th style="width: 100px;">ì‚­ì œì¼ì‹œ</th>
                        <th style="width: 80px;">ìƒíƒœ</th>
                        <th style="width: 100px;">ê´€ë¦¬</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>2540</td>
                        <td>ììœ ê²Œì‹œíŒ</td>
                        <td class="status-deleted">ê´‘ê³ ) ì €ë ´í•œ ê°€ê²©ì— ë¬¼ê±´ íŒë§¤í•©ë‹ˆë‹¤</td>
                        <td>ĞĞ½Ğ½Ğ°</td>
                        <td>ê´€ë¦¬ì</td>
                        <td>2025.10.01 10:20</td>
                        <td><span class="status-badge badge-deleted">ì‚­ì œë¨</span></td>
                        <td>
                            <button class="action-btn btn-restore" onclick="handleRestorePost(2540)">ë³µêµ¬</button>
                        </td>
                    </tr>
                    <tr>
                        <td>2535</td>
                        <td>ììœ ê²Œì‹œíŒ</td>
                        <td class="status-deleted">ìš•ì„¤ì´ í¬í•¨ëœ ê²Œì‹œê¸€</td>
                        <td>ê¹€ë¯¼ìˆ˜</td>
                        <td>ë³¸ì¸</td>
                        <td>2025.09.30 18:45</td>
                        <td><span class="status-badge badge-deleted">ì‚­ì œë¨</span></td>
                        <td>
                            <button class="action-btn btn-restore" onclick="handleRestorePost(2535)">ë³µêµ¬</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- ì‚­ì œëœ ëŒ“ê¸€ -->
        <div id="deleted-comments" class="tab-content">
            <div class="section-title">ì‚­ì œëœ ëŒ“ê¸€ ê´€ë¦¬</div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th style="width: 60px;">ë²ˆí˜¸</th>
                        <th>ëŒ“ê¸€ ë‚´ìš©</th>
                        <th style="width: 100px;">ì‘ì„±ì</th>
                        <th style="width: 100px;">ê²Œì‹œê¸€</th>
                        <th style="width: 100px;">ì‚­ì œì</th>
                        <th style="width: 100px;">ì‚­ì œì¼ì‹œ</th>
                        <th style="width: 80px;">ìƒíƒœ</th>
                        <th style="width: 100px;">ê´€ë¦¬</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>15180</td>
                        <td class="status-deleted">ê´‘ê³ ì„± ëŒ“ê¸€ì…ë‹ˆë‹¤. ì—¬ê¸° ì—°ë½ì£¼ì„¸ìš”...</td>
                        <td>Ğ’Ğ»Ğ°Ğ´Ğ¸Ğ¼Ğ¸Ñ€</td>
                        <td><a href="/board-view.html">ì€í–‰ê³„ì¢Œ ê°œì„¤...</a></td>
                        <td>ê´€ë¦¬ì</td>
                        <td>2025.10.01 09:15</td>
                        <td><span class="status-badge badge-deleted">ì‚­ì œë¨</span></td>
                        <td>
                            <button class="action-btn btn-restore" onclick="handleRestoreComment(15180)">ë³µêµ¬</button>
                        </td>
                    </tr>
                    <tr>
                        <td>15145</td>
                        <td class="status-deleted">ë¶€ì ì ˆí•œ ìš•ì„¤ì´ í¬í•¨ëœ ëŒ“ê¸€</td>
                        <td>ë°•ì§€ì˜</td>
                        <td><a href="/board-view.html">ìƒí™œì •ë³´ ê³µìœ ...</a></td>
                        <td>ë³¸ì¸</td>
                        <td>2025.09.30 16:30</td>
                        <td><span class="status-badge badge-deleted">ì‚­ì œë¨</span></td>
                        <td>
                            <button class="action-btn btn-restore" onclick="handleRestoreComment(15145)">ë³µêµ¬</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- ìš´ì˜ì ì—°ë½ -->
        <div id="contact-requests" class="tab-content">
            <div class="section-title">ìš´ì˜ì ì—°ë½ ê´€ë¦¬</div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th style="width: 100px;">ìœ í˜•</th>
                        <th>ì œëª©</th>
                        <th style="width: 120px;">ì´ë¦„</th>
                        <th style="width: 130px;">ì¼ì‹œ</th>
                        <th style="width: 160px;">ê´€ë¦¬</th>
                    </tr>
                </thead>
                <tbody id="contactRequestsTable">
                    <!-- JavaScriptë¡œ ë™ì  ë¡œë“œ -->
                </tbody>
            </table>
            <div id="noContactRequests" style="display: none; text-align: center; padding: 40px; color: #999;">
                ì ‘ìˆ˜ëœ ì—°ë½ì´ ì—†ìŠµë‹ˆë‹¤
            </div>
        </div>

        <!-- ëŒ€ì‹œë³´ë“œ -->
        <div id="dashboard" class="tab-content active">
            <div class="section-title">ğŸ“Š ëŒ€ì‹œë³´ë“œ</div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 30px;">
                <div class="stat-card">
                    <div class="stat-label">ì „ì²´ íšŒì› ìˆ˜</div>
                    <div class="stat-value" id="totalUsers">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">ì˜¤ëŠ˜ ê°€ì…</div>
                    <div class="stat-value" id="newUsersToday">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">ì „ì²´ ê²Œì‹œê¸€</div>
                    <div class="stat-value" id="totalPosts">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">ì˜¤ëŠ˜ ê²Œì‹œê¸€</div>
                    <div class="stat-value" id="newPostsToday">0</div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-label">ì²˜ë¦¬ ëŒ€ê¸° ì‹ ê³ </div>
                    <div class="stat-value" id="pendingReports">0</div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-label">í™œì„± íŒŒíŠ¸ë„ˆ</div>
                    <div class="stat-value" id="activePartners">0</div>
                </div>
            </div>

            <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: var(--shadow-sm); margin-bottom: 20px;">
                <h3 style="margin: 0 0 15px 0; font-size: 16px;">ìµœê·¼ í™œë™</h3>
                <div style="font-size: 13px; color: #666; line-height: 1.8;">
                    <p>â€¢ ì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ìš´ì˜ ì¤‘ì…ë‹ˆë‹¤.</p>
                    <p>â€¢ ëª¨ë“  ì„œë¹„ìŠ¤ê°€ í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
                    <p>â€¢ DeepL ë²ˆì—­ API ì—°ë™ ì™„ë£Œ</p>
                </div>
            </div>
        </div>

        <!-- íšŒì›ê´€ë¦¬ -->
        <div id="users" class="tab-content">
            <div class="section-title">ğŸ‘¥ íšŒì› ê´€ë¦¬</div>

            <!-- íšŒì› ìœ í˜•ë³„ íƒ­ -->
            <div style="display: flex; gap: 8px; margin-bottom: 20px; border-bottom: 2px solid #e5e7eb; align-items: center; justify-content: space-between;">
                <div style="display: flex; gap: 8px;">
                    <button class="user-type-tab active" data-type="all" onclick="switchUserTypeTab('all')">
                        ì „ì²´ íšŒì›
                    </button>
                    <button class="user-type-tab" data-type="admin" onclick="switchUserTypeTab('admin')">
                        ğŸ”‘ ê´€ë¦¬ì/ìŠ¤íƒ­
                    </button>
                    <button class="user-type-tab" data-type="virtual" onclick="switchUserTypeTab('virtual')">
                        ğŸ‘¤ ê´€ë¦¬ ê°€ìƒíšŒì›
                    </button>
                    <button class="user-type-tab" data-type="real" onclick="switchUserTypeTab('real')">
                        âœ… ì‹¤ì œ ê°€ì…íšŒì›
                    </button>
                </div>
                <div id="virtualPasswordInfo" style="display: none; padding: 8px 16px; background: #fef3c7; border: 1px solid #fbbf24; border-radius: 6px; font-size: 13px; font-weight: 600; color: #92400e;">
                    ğŸ”‘ ê°€ìƒíšŒì› ë¹„ë°€ë²ˆí˜¸: <span style="color: #b91c1c; font-family: monospace; font-size: 14px;">virtual1234</span>
                </div>
            </div>

            <div style="display: flex; gap: 10px; margin-bottom: 15px; align-items: center;">
                <input type="text" id="userSearchInput" placeholder="ì´ë©”ì¼, ë‹‰ë„¤ì„ìœ¼ë¡œ ê²€ìƒ‰..."
                    style="flex: 1; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 13px;">
                <button onclick="searchUsers()" class="action-btn" style="padding: 8px 20px; background: var(--admin-primary); color: white; border: none;">
                    ğŸ” ê²€ìƒ‰
                </button>
            </div>

            <table class="data-table" id="usersTable">
                <thead id="usersTableHead">
                    <tr>
                        <th style="width: 50px;">ID</th>
                        <th style="width: 150px;">ì´ë©”ì¼</th>
                        <th style="width: 100px;">í•œê¸€ ë‹‰ë„¤ì„</th>
                        <th style="width: 100px;">ëŸ¬ì‹œì•„ì–´ ë‹‰ë„¤ì„</th>
                        <th style="width: 70px;">ê¶Œí•œ</th>
                        <th style="width: 80px;">íšŒì›ìœ í˜•</th>
                        <th style="width: 70px;">ìƒíƒœ</th>
                        <th style="width: 100px;">ê°€ì…ì¼</th>
                        <th style="width: 120px;">ì‘ì—…</th>
                    </tr>
                </thead>
                <tbody id="usersTableBody">
                    <tr><td colspan="9" style="text-align: center; padding: 40px; color: #999;">íšŒì› ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td></tr>
                </tbody>
            </table>

            <!-- í˜ì´ì§• UI -->
            <div id="usersPagination" style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding: 15px; background: white; border-radius: 8px; box-shadow: var(--shadow-sm);">
                <div style="color: #666; font-size: 14px;">
                    ì „ì²´ <span id="totalUsers">0</span>ëª… ì¤‘
                    <span id="currentRangeStart">0</span>-<span id="currentRangeEnd">0</span>ëª… í‘œì‹œ
                </div>
                <div style="display: flex; gap: 4px; align-items: center;">
                    <button onclick="goToUserPage(1)" class="action-btn" id="firstPageBtn" style="padding: 8px 12px; font-size: 16px;">
                        &lt;&lt;
                    </button>
                    <button onclick="goToPreviousUserPage()" class="action-btn" id="prevPageBtn" style="padding: 8px 12px; font-size: 16px;">
                        &lt;
                    </button>
                    <div id="pageNumbers" style="display: flex; gap: 4px;">
                        <!-- í˜ì´ì§€ ë²ˆí˜¸ ë²„íŠ¼ë“¤ì´ ì—¬ê¸° ìƒì„±ë©ë‹ˆë‹¤ -->
                    </div>
                    <button onclick="goToNextUserPage()" class="action-btn" id="nextPageBtn" style="padding: 8px 12px; font-size: 16px;">
                        &gt;
                    </button>
                    <button onclick="goToUserPage('last')" class="action-btn" id="lastPageBtn" style="padding: 8px 12px; font-size: 16px;">
                        &gt;&gt;
                    </button>
                </div>
                <div style="color: #666; font-size: 14px;">
                    í˜ì´ì§€ <span id="currentPage">1</span> / <span id="totalPages">1</span>
                </div>
            </div>
        </div>

        <!-- ê²Œì‹œíŒ(ì¹´í…Œê³ ë¦¬) ê´€ë¦¬ -->
        <div id="posts" class="tab-content">
            <div class="section-title">ğŸ“ ê²Œì‹œíŒ (ì¹´í…Œê³ ë¦¬) ê´€ë¦¬</div>

            <div style="display: flex; gap: 10px; margin-bottom: 15px; align-items: center;">
                <button onclick="openCategoryModal()" class="action-btn" style="padding: 8px 20px; background: var(--admin-primary); color: white; border: none;">
                    â• ìƒˆ ê²Œì‹œíŒ ì¶”ê°€
                </button>
                <label style="margin-left: auto; display: flex; align-items: center; gap: 8px; font-size: 13px;">
                    <input type="checkbox" id="showInactive" onchange="loadCategories()" style="width: 16px; height: 16px;">
                    ë¹„í™œì„± ê²Œì‹œíŒ í‘œì‹œ
                </label>
            </div>

            <table class="data-table">
                <thead>
                    <tr>
                        <th style="width: 60px;">ID</th>
                        <th style="width: 120px;">Slug</th>
                        <th style="width: 150px;">í•œê¸€ëª…</th>
                        <th style="width: 150px;">ëŸ¬ì‹œì•„ì–´ëª…</th>
                        <th style="width: 80px;">ì•„ì´ì½˜</th>
                        <th style="width: 80px;">ìˆœì„œ</th>
                        <th style="width: 80px;">ìƒíƒœ</th>
                        <th style="width: 120px;">ìƒì„±ì¼</th>
                        <th style="width: 150px;">ì‘ì—…</th>
                    </tr>
                </thead>
                <tbody id="categoriesTableBody">
                    <tr><td colspan="9" style="text-align: center; padding: 40px; color: #999;">ì¹´í…Œê³ ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td></tr>
                </tbody>
            </table>
        </div>

        <!-- í†µê³„ -->
        <div id="stats" class="tab-content">
            <div class="section-title">ğŸ“ˆ í†µê³„</div>

            <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: var(--shadow-sm); margin-bottom: 20px;">
                <h3 style="margin: 0 0 15px 0; font-size: 16px;">íšŒì› í†µê³„</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div class="stat-card">
                        <div class="stat-label">ì´ë²ˆ ë‹¬ ì‹ ê·œ ê°€ì…</div>
                        <div class="stat-value">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">ì´ë²ˆ ì£¼ ì‹ ê·œ ê°€ì…</div>
                        <div class="stat-value">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">í™œì„± íšŒì›</div>
                        <div class="stat-value">0</div>
                    </div>
                </div>
            </div>

            <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: var(--shadow-sm); margin-bottom: 20px;">
                <h3 style="margin: 0 0 15px 0; font-size: 16px;">ê²Œì‹œê¸€ í†µê³„</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div class="stat-card">
                        <div class="stat-label">ì´ë²ˆ ë‹¬ ê²Œì‹œê¸€</div>
                        <div class="stat-value">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">ì´ë²ˆ ì£¼ ê²Œì‹œê¸€</div>
                        <div class="stat-value">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">ì „ì²´ ëŒ“ê¸€</div>
                        <div class="stat-value">0</div>
                    </div>
                </div>
            </div>

            <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: var(--shadow-sm);">
                <h3 style="margin: 0 0 15px 0; font-size: 16px;">ì¹´í…Œê³ ë¦¬ë³„ ê²Œì‹œê¸€</h3>
                <div style="font-size: 13px; color: #666; line-height: 2;">
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f0f0f0;">
                        <span>ììœ ê²Œì‹œíŒ</span>
                        <span style="font-weight: 600;">0ê°œ</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f0f0f0;">
                        <span>ê³µì§€ì‚¬í•­</span>
                        <span style="font-weight: 600;">0ê°œ</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f0f0f0;">
                        <span>êµ¬ì¸êµ¬ì§</span>
                        <span style="font-weight: 600;">0ê°œ</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                        <span>ì¤‘ê³ ì¥í„°</span>
                        <span style="font-weight: 600;">0ê°œ</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì‹ ê³ ê´€ë¦¬ (ê¸°ì¡´ ì»¨í…ì¸ ) -->
        <div id="reports" class="tab-content">
            <div class="section-title">ğŸš¨ ì‹ ê³  ê´€ë¦¬</div>

            <div style="margin-bottom: 15px;">
                <button class="tab-btn" onclick="showReportTab('reported-posts')">ì‹ ê³ ëœ ê²Œì‹œê¸€</button>
                <button class="tab-btn" onclick="showReportTab('reported-comments')">ì‹ ê³ ëœ ëŒ“ê¸€</button>
                <button class="tab-btn" onclick="showReportTab('deleted-posts')">ì‚­ì œëœ ê²Œì‹œê¸€</button>
                <button class="tab-btn" onclick="showReportTab('deleted-comments')">ì‚­ì œëœ ëŒ“ê¸€</button>
                <button class="tab-btn" onclick="showReportTab('contact-requests')">ìš´ì˜ì ì—°ë½</button>
            </div>

            <div id="reportSubContent">
                <p style="text-align: center; padding: 40px; color: #999;">ì¢Œì¸¡ íƒ­ì„ ì„ íƒí•˜ì„¸ìš”</p>
            </div>
        </div>

        <!-- ì‹œìŠ¤í…œ ì„¤ì • -->
        <div id="system-settings" class="tab-content">
            <div class="section-title">ì‹œìŠ¤í…œ ì„¤ì •</div>

            <!-- ë²ˆì—­ ì„¤ì • -->
            <div style="background: white; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                <h3 style="margin: 0 0 15px 0; font-size: 16px; color: #333;">ğŸŒ ë²ˆì—­ ì„¤ì •</h3>

                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #555;">ë²ˆì—­ ì„œë¹„ìŠ¤ ì œê³µì</label>
                    <select id="translationProvider" style="width: 300px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        <option value="deepl">DeepL (ê³ í’ˆì§ˆ ë²ˆì—­)</option>
                        <option value="google">Google Cloud Translation</option>
                    </select>
                </div>

                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #555;">DeepL API Key</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="deeplApiKey" placeholder="8ea8ad3f-c670-4df8-b1b4-abd4fe050c94:fx"
                               style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-family: monospace;">
                        <button onclick="saveDeepLSettings()" class="action-btn" style="padding: 8px 20px;">ì €ì¥</button>
                        <button onclick="testDeepLConnection()" class="action-btn" style="padding: 8px 20px; background: #28a745;">í…ŒìŠ¤íŠ¸</button>
                    </div>
                    <div style="margin-top: 5px; font-size: 12px; color: #666;">
                        ğŸ’¡ DeepL API KeyëŠ” <a href="https://www.deepl.com/pro-api" target="_blank" style="color: #0066cc;">DeepL Pro API</a>ì—ì„œ ë°œê¸‰ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </div>
                    <div id="deeplStatus" style="margin-top: 10px; padding: 10px; border-radius: 4px; display: none;"></div>
                </div>
            </div>

            <!-- ê¸°íƒ€ ì„¤ì • ì„¹ì…˜ (ì¶”í›„ í™•ì¥) -->
            <div style="background: white; border-radius: 8px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                <h3 style="margin: 0 0 15px 0; font-size: 16px; color: #333;">âš™ï¸ ê¸°íƒ€ ì„¤ì •</h3>
                <div style="padding: 20px; text-align: center; color: #999;">
                    ì¶”ê°€ ì‹œìŠ¤í…œ ì„¤ì •ì´ ê³§ ì œê³µë©ë‹ˆë‹¤.
                </div>
            </div>
        </div>
    </div>

    <br><br>

    <!-- ì¹´í…Œê³ ë¦¬ ì¶”ê°€/ìˆ˜ì • ëª¨ë‹¬ -->
    <div id="categoryModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <div class="modal-title" id="categoryModalTitle">ìƒˆ ê²Œì‹œíŒ ì¶”ê°€</div>
                <button class="modal-close" onclick="closeCategoryModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="categoryForm" onsubmit="saveCategoryForm(event)" style="display: grid; gap: 15px;">
                    <input type="hidden" id="categoryId">

                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; font-size: 13px;">Slug (ì˜ë¬¸ ì‹ë³„ì) *</label>
                        <input type="text" id="categorySlug" required
                            placeholder="ì˜ˆ: free, notice, job"
                            style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 13px;">
                        <small style="color: #666; font-size: 11px;">URLì— ì‚¬ìš©ë˜ëŠ” ì˜ë¬¸ ì‹ë³„ì (ìˆ˜ì • ë¶ˆê°€)</small>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; font-size: 13px;">í•œê¸€ëª… *</label>
                            <input type="text" id="categoryNameKo" required
                                placeholder="ì˜ˆ: ììœ ê²Œì‹œíŒ"
                                style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 13px;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; font-size: 13px;">ëŸ¬ì‹œì•„ì–´ëª… *</label>
                            <input type="text" id="categoryNameRu" required
                                placeholder="ì˜ˆ: Ğ¡Ğ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ğ°Ñ Ğ´Ğ¾ÑĞºĞ°"
                                style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 13px;">
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; font-size: 13px;">í•œê¸€ ì„¤ëª…</label>
                            <textarea id="categoryDescKo" rows="3"
                                placeholder="ê²Œì‹œíŒ ì„¤ëª… (ì„ íƒì‚¬í•­)"
                                style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 13px;"></textarea>
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; font-size: 13px;">ëŸ¬ì‹œì•„ì–´ ì„¤ëª…</label>
                            <textarea id="categoryDescRu" rows="3"
                                placeholder="ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ´Ğ¾ÑĞºĞ¸ (Ğ½ĞµĞ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾)"
                                style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 13px;"></textarea>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; font-size: 13px;">ì•„ì´ì½˜</label>
                            <input type="text" id="categoryIcon"
                                placeholder="ì˜ˆ: ğŸ’¬, ğŸ“¢, ğŸ’¼"
                                style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 13px;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; font-size: 13px;">ì •ë ¬ ìˆœì„œ</label>
                            <input type="number" id="categorySortOrder" value="0"
                                style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 13px;">
                        </div>
                    </div>

                    <!-- ë ˆì´ì•„ì›ƒ íƒ€ì… ì„ íƒ -->
                    <div>
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; font-size: 13px;">ğŸ“± ê²Œì‹œíŒ í˜•íƒœ</label>
                        <select id="categoryLayoutType" style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 4px; font-size: 13px; font-weight: 500;">
                            <option value="list">ğŸ“‹ ê²Œì‹œíŒí˜• (ê¸°ë³¸ ë¦¬ìŠ¤íŠ¸)</option>
                            <option value="card">ğŸ´ ì¹´ë“œí˜• (ì¹´ë“œ ë ˆì´ì•„ì›ƒ)</option>
                            <option value="gallery">ğŸ–¼ï¸ ì•¨ë²”í˜• (ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬)</option>
                            <option value="form">ğŸ“ ë¬¸ì˜í¼í˜• (ë¬¸ì˜ ì œì¶œ ì–‘ì‹)</option>
                        </select>
                        <small style="color: #666; font-size: 11px; display: block; margin-top: 5px;">
                            ğŸ’¡ <strong>í˜•íƒœ ì„¤ëª…:</strong><br>
                            â€¢ ê²Œì‹œíŒí˜•: ì¼ë°˜ì ì¸ ê²Œì‹œê¸€ ëª©ë¡ (ììœ ê²Œì‹œíŒ, ê³µì§€ì‚¬í•­ ë“±)<br>
                            â€¢ ì¹´ë“œí˜•: ì¹´ë“œ ìŠ¤íƒ€ì¼ë¡œ í‘œì‹œ (ë‰´ìŠ¤, ë¸”ë¡œê·¸ ë“±)<br>
                            â€¢ ì•¨ë²”í˜•: ì´ë¯¸ì§€ ì¤‘ì‹¬ ê°¤ëŸ¬ë¦¬ (ì‚¬ì§„ì²©, í¬íŠ¸í´ë¦¬ì˜¤ ë“±)<br>
                            â€¢ ë¬¸ì˜í¼í˜•: ë¬¸ì˜ ì œì¶œ ì–‘ì‹ (ê´‘ê³ ìš”ì²­, ê±´ì˜ì‚¬í•­ ë“±)
                        </small>
                    </div>

                    <div style="display: grid; gap: 10px;">
                        <div style="padding: 10px; background: #f8f9fa; border-radius: 4px; border: 1px solid #e9ecef;">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" id="categoryActive" style="width: 18px; height: 18px; cursor: pointer;" checked>
                                <span style="font-weight: 600; font-size: 13px;">ê²Œì‹œíŒ í™œì„±í™”</span>
                            </label>
                            <small style="color: #666; font-size: 11px; display: block; margin-top: 5px; margin-left: 26px;">
                                ì²´í¬ í•´ì œí•˜ë©´ ê²Œì‹œíŒì´ ì‚¬ìš©ìì—ê²Œ í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                            </small>
                        </div>

                        <div style="padding: 10px; background: #f8f9fa; border-radius: 4px; border: 1px solid #e9ecef;">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" id="categoryIsGroup" style="width: 18px; height: 18px; cursor: pointer;">
                                <span style="font-weight: 600; font-size: 13px;">ê·¸ë£¹ í—¤ë”ë¡œ ì„¤ì •</span>
                            </label>
                            <small style="color: #666; font-size: 11px; display: block; margin-top: 5px; margin-left: 26px;">
                                ì²´í¬í•˜ë©´ ê²Œì‹œíŒì´ ì•„ë‹Œ ì„¹ì…˜ ì œëª©ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤. (ì˜ˆ: "ë¹„ì¦ˆë‹ˆìŠ¤", "ìš´ì˜ì ì—°ë½")
                            </small>
                        </div>
                    </div>

                    <!-- ê¶Œí•œ ì„¤ì • ì„¹ì…˜ -->
                    <div style="padding: 15px; background: #fff9e6; border-radius: 6px; border: 2px solid #ffc107;">
                        <div style="font-weight: 700; font-size: 14px; margin-bottom: 15px; color: #f57c00;">
                            ğŸ”’ ê²Œì‹œíŒ ê¶Œí•œ ì„¤ì •
                        </div>

                        <div style="display: grid; gap: 12px;">
                            <!-- ì½ê¸° ê¶Œí•œ -->
                            <div>
                                <label style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 13px; color: #333;">
                                    ğŸ“– ì½ê¸° ê¶Œí•œ
                                </label>
                                <select id="categoryReadPermission" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 4px; font-size: 13px; font-weight: 500;">
                                    <option value="ALL">ëª¨ë‘ (ë¹„ë¡œê·¸ì¸ í¬í•¨)</option>
                                    <option value="USER">ì¼ë°˜íšŒì› ì´ìƒ</option>
                                    <option value="PREMIUM">íŠ¹ë³„íšŒì› ì´ìƒ</option>
                                    <option value="STAFF">ìŠ¤íƒ­ ì´ìƒ</option>
                                    <option value="ADMIN">ê´€ë¦¬ìë§Œ</option>
                                </select>
                            </div>

                            <!-- ì“°ê¸° ê¶Œí•œ -->
                            <div>
                                <label style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 13px; color: #333;">
                                    âœï¸ ì“°ê¸° ê¶Œí•œ
                                </label>
                                <select id="categoryWritePermission" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 4px; font-size: 13px; font-weight: 500;">
                                    <option value="ALL">ëª¨ë‘ (ë¹„ë¡œê·¸ì¸ í¬í•¨)</option>
                                    <option value="USER">ì¼ë°˜íšŒì› ì´ìƒ</option>
                                    <option value="PREMIUM">íŠ¹ë³„íšŒì› ì´ìƒ</option>
                                    <option value="STAFF">ìŠ¤íƒ­ ì´ìƒ</option>
                                    <option value="ADMIN">ê´€ë¦¬ìë§Œ</option>
                                </select>
                            </div>

                            <!-- ëŒ“ê¸€ ê¶Œí•œ -->
                            <div>
                                <label style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 13px; color: #333;">
                                    ğŸ’¬ ëŒ“ê¸€ ê¶Œí•œ
                                </label>
                                <select id="categoryCommentPermission" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 4px; font-size: 13px; font-weight: 500;">
                                    <option value="ALL">ëª¨ë‘ (ë¹„ë¡œê·¸ì¸ í¬í•¨)</option>
                                    <option value="USER">ì¼ë°˜íšŒì› ì´ìƒ</option>
                                    <option value="PREMIUM">íŠ¹ë³„íšŒì› ì´ìƒ</option>
                                    <option value="STAFF">ìŠ¤íƒ­ ì´ìƒ</option>
                                    <option value="ADMIN">ê´€ë¦¬ìë§Œ</option>
                                </select>
                            </div>
                        </div>

                        <small style="display: block; margin-top: 10px; color: #f57c00; font-size: 11px; line-height: 1.5;">
                            ğŸ’¡ <strong>ê¶Œí•œ ì„¤ëª…:</strong><br>
                            â€¢ ëª¨ë‘: ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ë°©ë¬¸ìë„ ê°€ëŠ¥<br>
                            â€¢ ì¼ë°˜íšŒì›: ê°€ì… í›„ ë¡œê·¸ì¸í•œ ëª¨ë“  ì‚¬ìš©ì<br>
                            â€¢ íŠ¹ë³„íšŒì›: í”„ë¦¬ë¯¸ì—„ ë©¤ë²„ì‹­ ì‚¬ìš©ì<br>
                            â€¢ ìŠ¤íƒ­: ìš´ì˜ì§„ ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ì<br>
                            â€¢ ê´€ë¦¬ì: ìµœê³  ê´€ë¦¬ìë§Œ
                        </small>
                    </div>

                    <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 10px;">
                        <button type="button" onclick="closeCategoryModal()" class="action-btn" style="padding: 8px 20px;">
                            ì·¨ì†Œ
                        </button>
                        <button type="submit" class="action-btn" style="padding: 8px 20px; background: var(--admin-primary); color: white; border: none;">
                            ì €ì¥
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ìƒì„¸ë³´ê¸° ëª¨ë‹¬ -->
    <div id="contactModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">ì—°ë½ ìƒì„¸ ì •ë³´</div>
                <button class="modal-close" onclick="closeContactModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- JavaScriptë¡œ ë™ì  ë¡œë“œ -->
            </div>
        </div>
    </div>

    <script>
        // ===== í† í° ê´€ë¦¬ í•¨ìˆ˜ë“¤ =====

        // í† í° ê°±ì‹  í•¨ìˆ˜
        async function refreshAccessToken() {
            const refreshToken = localStorage.getItem('refresh_token');

            if (!refreshToken) {
                console.log('[refreshAccessToken] refresh_tokenì´ ì—†ìŠµë‹ˆë‹¤.');
                return null;
            }

            try {
                console.log('[refreshAccessToken] í† í° ê°±ì‹  ì‹œë„...');
                const response = await fetch('http://localhost:8000/api/auth/refresh', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ refresh_token: refreshToken })
                });

                if (response.ok) {
                    const data = await response.json();
                    console.log('[refreshAccessToken] í† í° ê°±ì‹  ì„±ê³µ');

                    // ìƒˆ í† í° ì €ì¥
                    localStorage.setItem('access_token', data.access_token);

                    // userInfoë„ ì—…ë°ì´íŠ¸
                    const userInfoStr = localStorage.getItem('userInfo');
                    if (userInfoStr) {
                        try {
                            const userInfo = JSON.parse(userInfoStr);
                            userInfo.access_token = data.access_token;
                            localStorage.setItem('userInfo', JSON.stringify(userInfo));
                        } catch (e) {
                            console.error('[refreshAccessToken] userInfo ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', e);
                        }
                    }

                    return data.access_token;
                } else {
                    console.error('[refreshAccessToken] í† í° ê°±ì‹  ì‹¤íŒ¨:', response.status);
                    return null;
                }
            } catch (error) {
                console.error('[refreshAccessToken] ì˜ˆì™¸ ë°œìƒ:', error);
                return null;
            }
        }

        // API í˜¸ì¶œ ì‹œ ìë™ìœ¼ë¡œ í† í° ê°±ì‹ ì„ ì‹œë„í•˜ëŠ” fetch ë˜í¼
        async function fetchWithTokenRefresh(url, options = {}) {
            // ì²« ë²ˆì§¸ ì‹œë„
            let response = await fetch(url, options);

            // 401 ì—ëŸ¬ì´ê³  í† í°ì´ ë§Œë£Œëœ ê²½ìš°
            if (response.status === 401) {
                // response.clone()ì„ ì‚¬ìš©í•˜ì—¬ ìŠ¤íŠ¸ë¦¼ì„ ë³µì œ (ì—¬ëŸ¬ ë²ˆ ì½ì„ ìˆ˜ ìˆë„ë¡)
                const responseClone = response.clone();
                const errorText = await responseClone.text();

                console.log('[fetchWithTokenRefresh] 401 ì˜¤ë¥˜ ì‘ë‹µ:', errorText.substring(0, 200));

                // í† í° ë§Œë£Œ í™•ì¸
                if (errorText.includes('expired') || errorText.includes('ë§Œë£Œ')) {
                    console.log('[fetchWithTokenRefresh] í† í° ë§Œë£Œ ê°ì§€, ê°±ì‹  ì‹œë„...');

                    // í† í° ê°±ì‹ 
                    const newToken = await refreshAccessToken();

                    if (newToken) {
                        // í—¤ë”ì— ìƒˆ í† í° ì ìš©
                        if (!options.headers) options.headers = {};
                        options.headers['Authorization'] = `Bearer ${newToken}`;

                        // ì¬ì‹œë„
                        console.log('[fetchWithTokenRefresh] ìƒˆ í† í°ìœ¼ë¡œ ì¬ì‹œë„...');
                        response = await fetch(url, options);
                    } else {
                        // í† í° ê°±ì‹  ì‹¤íŒ¨ - ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ
                        console.error('[fetchWithTokenRefresh] í† í° ê°±ì‹  ì‹¤íŒ¨, ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™');
                        alert('ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.');
                        localStorage.removeItem('access_token');
                        localStorage.removeItem('refresh_token');
                        localStorage.removeItem('userInfo');
                        window.location.href = '/login.html';
                        return null;
                    }
                } else {
                    // í† í° ë§Œë£Œê°€ ì•„ë‹Œ ë‹¤ë¥¸ 401 ì˜¤ë¥˜ (ê¶Œí•œ ë¶€ì¡± ë“±)
                    console.error('[fetchWithTokenRefresh] ê¶Œí•œ ì—†ìŒ ë˜ëŠ” ì¸ì¦ ì‹¤íŒ¨');
                }
            }

            return response;
        }

        // ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜
        function handleLogout() {
            if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                console.log('[handleLogout] ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ ì¤‘...');

                // ëª¨ë“  ì¸ì¦ ì •ë³´ ì‚­ì œ
                localStorage.removeItem('access_token');
                localStorage.removeItem('refresh_token');
                localStorage.removeItem('userInfo');

                // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
                alert('ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.');
                window.location.href = '/login.html';
            }
        }

        // ê´€ë¦¬ì ê¶Œí•œ í™•ì¸ ë° ìš´ì˜ì ì—°ë½ ë¡œë“œ
        window.addEventListener('DOMContentLoaded', function() {
            const userInfoStr = localStorage.getItem('userInfo');

            if (!userInfoStr) {
                alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                window.location.href = '/login.html';
                return;
            }

            try {
                const userInfo = JSON.parse(userInfoStr);
                if (!userInfo.isAdmin) {
                    alert('ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.');
                    window.location.href = '/index.html';
                    return;
                }

                // ëŒ€ì‹œë³´ë“œ ì´ˆê¸° ë¡œë“œ
                loadDashboard();
            } catch (e) {
                console.error('ì‚¬ìš©ì ì •ë³´ íŒŒì‹± ì˜¤ë¥˜:', e);
                alert('ë¡œê·¸ì¸ ì •ë³´ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                window.location.href = '/login.html';
            }
        });

        // ìš´ì˜ì ì—°ë½ ë°ì´í„° ë¡œë“œ
        function loadContactRequests() {
            const contacts = JSON.parse(localStorage.getItem('adminContacts') || '[]');
            const tableBody = document.getElementById('contactRequestsTable');
            const noDataDiv = document.getElementById('noContactRequests');

            if (contacts.length === 0) {
                noDataDiv.style.display = 'block';
                return;
            }

            noDataDiv.style.display = 'none';

            tableBody.innerHTML = contacts.map((contact, index) => {
                const typeLabel = contact.type === 'ad' ? 'ê´‘ê³ /í˜‘ë ¥' : 'ê±´ì˜';
                const typeBadge = contact.type === 'ad' ? 'badge-reported' : 'badge-normal';

                // ìš”ì²­ ìœ í˜• ë²ˆì—­
                const requestTypeMap = {
                    // ê´‘ê³ /í˜‘ë ¥ ìš”ì²­ ìœ í˜•
                    'banner': 'ë°°ë„ˆ ê´‘ê³ ',
                    'content': 'ì½˜í…ì¸  í˜‘ì°¬',
                    'partnership': 'ë¹„ì¦ˆë‹ˆìŠ¤ ì œíœ´',
                    'event': 'ì´ë²¤íŠ¸ í˜‘ë ¥',
                    // ê±´ì˜ ìœ í˜•
                    'improvement': 'ì„œë¹„ìŠ¤ ê°œì„ ',
                    'feature': 'ê¸°ëŠ¥ ì¶”ê°€',
                    'bug': 'ë²„ê·¸ ì‹ ê³ ',
                    'complaint': 'ë¶ˆí¸ ì‚¬í•­',
                    'question': 'ì§ˆë¬¸',
                    'other': 'ê¸°íƒ€'
                };

                const requestType = contact.requestType || contact.suggestType || 'other';
                const requestTypeLabel = requestTypeMap[requestType] || 'ê¸°íƒ€';

                const date = new Date(contact.timestamp);
                const dateStr = date.toLocaleString('ko-KR', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit'
                });

                return `
                    <tr>
                        <td><span class="status-badge ${typeBadge}">${typeLabel}</span></td>
                        <td><strong>${contact.title || '-'}</strong></td>
                        <td>${contact.name || '-'}</td>
                        <td>${dateStr}</td>
                        <td style="white-space: nowrap;">
                            <button class="action-btn" onclick="viewContactDetail(${index})">ìƒì„¸ë³´ê¸°</button>
                            <button class="action-btn btn-delete" onclick="deleteContactRequest(${index})">ì‚­ì œ</button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // ì—°ë½ ìƒì„¸ë³´ê¸°
        function viewContactDetail(index) {
            const contacts = JSON.parse(localStorage.getItem('adminContacts') || '[]');
            const contact = contacts[index];

            if (!contact) {
                alert('ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            const typeLabel = contact.type === 'ad' ? 'ê´‘ê³ /í˜‘ë ¥ ìš”ì²­' : 'ìš´ì˜ì ê±´ì˜';
            const requestTypeMap = {
                'banner': 'ë°°ë„ˆ ê´‘ê³ ',
                'content': 'ì½˜í…ì¸  í˜‘ì°¬',
                'partnership': 'ë¹„ì¦ˆë‹ˆìŠ¤ ì œíœ´',
                'event': 'ì´ë²¤íŠ¸ í˜‘ë ¥',
                'improvement': 'ì„œë¹„ìŠ¤ ê°œì„ ',
                'feature': 'ê¸°ëŠ¥ ì¶”ê°€',
                'bug': 'ë²„ê·¸ ì‹ ê³ ',
                'complaint': 'ë¶ˆí¸ ì‚¬í•­',
                'question': 'ì§ˆë¬¸',
                'other': 'ê¸°íƒ€'
            };
            const requestType = contact.requestType || contact.suggestType || 'other';
            const requestTypeLabel = requestTypeMap[requestType] || 'ê¸°íƒ€';

            document.getElementById('modalTitle').textContent = typeLabel;

            let modalHTML = `
                <div class="detail-row">
                    <div class="detail-label">ğŸ‘¤ ì´ë¦„</div>
                    <div class="detail-value">${contact.name || '-'}</div>
                </div>
            `;

            if (contact.company) {
                modalHTML += `
                    <div class="detail-row">
                        <div class="detail-label">ğŸ¢ íšŒì‚¬ëª…</div>
                        <div class="detail-value">${contact.company}</div>
                    </div>
                `;
            }

            modalHTML += `
                <div class="detail-row">
                    <div class="detail-label">ğŸ“§ ì´ë©”ì¼</div>
                    <div class="detail-value">${contact.email || '-'}</div>
                </div>
            `;

            if (contact.phone) {
                modalHTML += `
                    <div class="detail-row">
                        <div class="detail-label">ğŸ“ ì—°ë½ì²˜</div>
                        <div class="detail-value">${contact.phone}</div>
                    </div>
                `;
            }

            modalHTML += `
                <div class="detail-row">
                    <div class="detail-label">ğŸ“‚ ìš”ì²­ ìœ í˜•</div>
                    <div class="detail-value">${requestTypeLabel}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">ğŸ“Œ ì œëª©</div>
                    <div class="detail-value"><strong>${contact.title || '-'}</strong></div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">ğŸ“ ìƒì„¸ ë‚´ìš©</div>
                    <div class="detail-content">${contact.content || '-'}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">ğŸ• ì ‘ìˆ˜ ì¼ì‹œ</div>
                    <div class="detail-value">${new Date(contact.timestamp).toLocaleString('ko-KR', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    })}</div>
                </div>
            `;

            document.getElementById('modalBody').innerHTML = modalHTML;
            document.getElementById('contactModal').classList.add('show');
        }

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeContactModal() {
            document.getElementById('contactModal').classList.remove('show');
        }

        // ëª¨ë‹¬ ë°°ê²½ í´ë¦­ì‹œ ë‹«ê¸°
        document.addEventListener('click', function(e) {
            if (e.target.id === 'contactModal') {
                closeContactModal();
            }
        });

        // ì—°ë½ ì‚­ì œ
        function deleteContactRequest(index) {
            if (confirm('ì´ ì—°ë½ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                const contacts = JSON.parse(localStorage.getItem('adminContacts') || '[]');
                contacts.splice(index, 1);
                localStorage.setItem('adminContacts', JSON.stringify(contacts));
                alert('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                loadContactRequests();
            }
        }

        // íƒ­ ì „í™˜
        function showTab(tabId) {
            // ëª¨ë“  íƒ­ ë²„íŠ¼ê³¼ ì½˜í…ì¸  ë¹„í™œì„±í™”
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // ì„ íƒëœ íƒ­ í™œì„±í™”
            event.target.classList.add('active');
            document.getElementById(tabId).classList.add('active');

            // íƒ­ ì „í™˜ ì‹œ ë°ì´í„° ë¡œë“œ
            if (tabId === 'dashboard') {
                loadDashboard();
            } else if (tabId === 'users') {
                loadUsers();
            } else if (tabId === 'posts') {
                loadCategories();
            }
        }

        // ===== ì¹´í…Œê³ ë¦¬(ê²Œì‹œíŒ) ê´€ë¦¬ í•¨ìˆ˜ë“¤ =====

        // ì¹´í…Œê³ ë¦¬ ëª©ë¡ ë¡œë“œ
        async function loadCategories() {
            const token = localStorage.getItem('access_token') ||
                         (localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')).access_token : null);

            console.log('[loadCategories] í† í° í™•ì¸:', token ? 'ìˆìŒ' : 'ì—†ìŒ');

            if (!token) {
                alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                return;
            }

            const includeInactive = document.getElementById('showInactive')?.checked || false;
            console.log('[loadCategories] ë¹„í™œì„± í¬í•¨:', includeInactive);

            const tbody = document.getElementById('categoriesTableBody');
            tbody.innerHTML = '<tr><td colspan="9" style="text-align: center; padding: 40px; color: #999;">ì¹´í…Œê³ ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td></tr>';

            try {
                const url = `http://localhost:8000/api/admin/categories?include_inactive=${includeInactive}`;
                console.log('[loadCategories] API í˜¸ì¶œ:', url);

                const response = await fetchWithTokenRefresh(url, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                // fetchWithTokenRefreshê°€ nullì„ ë¦¬í„´í•˜ë©´ (ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë¨)
                if (!response) return;

                console.log('[loadCategories] ì‘ë‹µ ìƒíƒœ:', response.status);

                if (response.ok) {
                    const categories = await response.json();
                    console.log('[loadCategories] ì¹´í…Œê³ ë¦¬ ìˆ˜:', categories.length);

                    if (categories.length === 0) {
                        tbody.innerHTML = '<tr><td colspan="9" style="text-align: center; padding: 40px;">ë“±ë¡ëœ ê²Œì‹œíŒì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
                        return;
                    }

                    tbody.innerHTML = categories.map(cat => `
                        <tr style="${cat.is_group ? 'background-color: #f8f9fa;' : ''}">
                            <td>${cat.id}</td>
                            <td><code>${cat.slug}</code></td>
                            <td>
                                ${cat.name_ko || '-'}
                                ${cat.is_group ? '<span class="badge" style="background: #6c757d; color: white; font-size: 10px; margin-left: 5px;">ê·¸ë£¹</span>' : ''}
                            </td>
                            <td>${cat.name_ru || '-'}</td>
                            <td style="font-size: 20px;">${cat.icon || 'ğŸ“‹'}</td>
                            <td>${cat.sort_order}</td>
                            <td>
                                <span class="badge ${cat.is_active ? 'badge-success' : 'badge-secondary'}">
                                    ${cat.is_active ? 'í™œì„±' : 'ë¹„í™œì„±'}
                                </span>
                            </td>
                            <td>${new Date(cat.created_at).toLocaleDateString('ko-KR')}</td>
                            <td>
                                <button onclick="openCategoryModal(${cat.id})" class="btn-sm btn-primary" style="margin-right: 5px;">âœï¸ ìˆ˜ì •</button>
                                <button onclick="deleteCategory(${cat.id}, '${cat.slug}')" class="btn-sm btn-danger">ğŸ—‘ï¸ ì‚­ì œ</button>
                            </td>
                        </tr>
                    `).join('');
                } else {
                    const errorText = await response.text();
                    console.error('[loadCategories] ì˜¤ë¥˜ ì‘ë‹µ:', errorText);

                    let errorMsg = 'ì¹´í…Œê³ ë¦¬ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.';
                    try {
                        const errorData = JSON.parse(errorText);
                        errorMsg += `\nìƒíƒœ: ${response.status}\nìƒì„¸: ${errorData.detail || errorText}`;
                    } catch (e) {
                        errorMsg += `\nìƒíƒœ: ${response.status}\nì‘ë‹µ: ${errorText.substring(0, 200)}`;
                    }

                    tbody.innerHTML = `<tr><td colspan="9" style="text-align: center; padding: 40px; color: #f44336;">
                        ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.<br>
                        ìƒíƒœ ì½”ë“œ: ${response.status}<br>
                        <small style="color: #999;">${errorText.substring(0, 100)}</small>
                    </td></tr>`;
                    alert(errorMsg);
                }
            } catch (error) {
                console.error('[loadCategories] ì˜ˆì™¸ ë°œìƒ:', error);
                tbody.innerHTML = `<tr><td colspan="9" style="text-align: center; padding: 40px; color: #f44336;">
                    ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.<br>
                    <small style="color: #999;">${error.message}</small>
                </td></tr>`;
                alert(`ì¹´í…Œê³ ë¦¬ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\n\nì˜¤ë¥˜: ${error.message}\n\në°±ì—”ë“œê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.`);
            }
        }

        // ì¹´í…Œê³ ë¦¬ ëª¨ë‹¬ ì—´ê¸° (ì¶”ê°€ ë˜ëŠ” ìˆ˜ì •)
        async function openCategoryModal(categoryId = null) {
            const modal = document.getElementById('categoryModal');
            const modalTitle = document.getElementById('categoryModalTitle');
            const form = document.getElementById('categoryForm');

            // í¼ ì´ˆê¸°í™”
            form.reset();
            document.getElementById('categoryId').value = '';

            if (categoryId) {
                // ìˆ˜ì • ëª¨ë“œ
                modalTitle.textContent = 'ê²Œì‹œíŒ ìˆ˜ì •';

                // ê¸°ì¡´ ì¹´í…Œê³ ë¦¬ ë°ì´í„° ë¡œë“œ
                const token = localStorage.getItem('access_token') ||
                             (localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')).access_token : null);

                try {
                    const response = await fetch(`http://localhost:8000/api/admin/categories`, {
                        headers: {
                            'Authorization': `Bearer ${token}`
                        }
                    });

                    if (response.ok) {
                        const categories = await response.json();
                        const category = categories.find(c => c.id === categoryId);

                        if (category) {
                            document.getElementById('categoryId').value = category.id;
                            document.getElementById('categorySlug').value = category.slug;
                            document.getElementById('categoryNameKo').value = category.name_ko || '';
                            document.getElementById('categoryNameRu').value = category.name_ru || '';
                            document.getElementById('categoryDescKo').value = category.description_ko || '';
                            document.getElementById('categoryDescRu').value = category.description_ru || '';
                            document.getElementById('categoryIcon').value = category.icon || '';
                            document.getElementById('categorySortOrder').value = category.sort_order || 0;
                            document.getElementById('categoryLayoutType').value = category.layout_type || 'list';
                            document.getElementById('categoryActive').checked = category.is_active;
                            document.getElementById('categoryIsGroup').checked = category.is_group || false;

                            // ê¶Œí•œ ì„¤ì • ë¡œë“œ (ëŒ€ì†Œë¬¸ì êµ¬ë¶„ ì—†ì´)
                            document.getElementById('categoryReadPermission').value = (category.read_permission || 'ALL').toUpperCase();
                            document.getElementById('categoryWritePermission').value = (category.write_permission || 'USER').toUpperCase();
                            document.getElementById('categoryCommentPermission').value = (category.comment_permission || 'USER').toUpperCase();
                        }
                    }
                } catch (error) {
                    console.error('ì¹´í…Œê³ ë¦¬ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                }
            } else {
                // ì¶”ê°€ ëª¨ë“œ
                modalTitle.textContent = 'ìƒˆ ê²Œì‹œíŒ ì¶”ê°€';
                document.getElementById('categoryActive').checked = true;
            }

            modal.classList.add('show');
        }

        // ì¹´í…Œê³ ë¦¬ ëª¨ë‹¬ ë‹«ê¸°
        function closeCategoryModal() {
            document.getElementById('categoryModal').classList.remove('show');
        }

        // ì¹´í…Œê³ ë¦¬ ì €ì¥ (ì¶”ê°€ ë˜ëŠ” ìˆ˜ì •)
        async function saveCategoryForm(event) {
            event.preventDefault();

            const token = localStorage.getItem('access_token') ||
                         (localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')).access_token : null);

            if (!token) {
                alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                return;
            }

            const categoryId = document.getElementById('categoryId').value;
            const formData = {
                slug: document.getElementById('categorySlug').value.trim(),
                name_ko: document.getElementById('categoryNameKo').value.trim() || null,
                name_ru: document.getElementById('categoryNameRu').value.trim() || null,
                description_ko: document.getElementById('categoryDescKo').value.trim() || null,
                description_ru: document.getElementById('categoryDescRu').value.trim() || null,
                icon: document.getElementById('categoryIcon').value.trim() || null,
                sort_order: parseInt(document.getElementById('categorySortOrder').value) || 0,
                layout_type: document.getElementById('categoryLayoutType').value,
                is_active: document.getElementById('categoryActive').checked,
                is_group: document.getElementById('categoryIsGroup').checked,
                // ê¶Œí•œ ì„¤ì •
                read_permission: document.getElementById('categoryReadPermission').value,
                write_permission: document.getElementById('categoryWritePermission').value,
                comment_permission: document.getElementById('categoryCommentPermission').value
            };

            // ìœ íš¨ì„± ê²€ì‚¬
            if (!formData.slug) {
                alert('ìŠ¬ëŸ¬ê·¸(Slug)ëŠ” í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.');
                return;
            }

            if (!formData.name_ko && !formData.name_ru) {
                alert('í•œê¸€ ì´ë¦„ ë˜ëŠ” ëŸ¬ì‹œì•„ì–´ ì´ë¦„ ì¤‘ ìµœì†Œ í•˜ë‚˜ëŠ” ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.');
                return;
            }

            try {
                let response;

                if (categoryId) {
                    // ìˆ˜ì •
                    response = await fetch(`http://localhost:8000/api/admin/categories/${categoryId}`, {
                        method: 'PUT',
                        headers: {
                            'Authorization': `Bearer ${token}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(formData)
                    });
                } else {
                    // ì¶”ê°€
                    response = await fetch('http://localhost:8000/api/admin/categories', {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${token}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(formData)
                    });
                }

                if (response.ok) {
                    alert(categoryId ? 'ê²Œì‹œíŒì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.' : 'ìƒˆ ê²Œì‹œíŒì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    closeCategoryModal();
                    loadCategories();
                } else {
                    const errorData = await response.json();
                    alert(`ì €ì¥ ì‹¤íŒ¨: ${errorData.detail || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`);
                }
            } catch (error) {
                console.error('ì¹´í…Œê³ ë¦¬ ì €ì¥ ì‹¤íŒ¨:', error);
                alert('ê²Œì‹œíŒ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ì¹´í…Œê³ ë¦¬ ì‚­ì œ
        async function deleteCategory(categoryId, categorySlug) {
            if (!confirm(`ì •ë§ë¡œ "${categorySlug}" ê²Œì‹œíŒì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nê²Œì‹œê¸€ì´ ìˆëŠ” ê²½ìš° ë¹„í™œì„±í™”ë˜ë©°, ê²Œì‹œê¸€ì´ ì—†ëŠ” ê²½ìš° ì™„ì „íˆ ì‚­ì œë©ë‹ˆë‹¤.`)) {
                return;
            }

            const token = localStorage.getItem('access_token') ||
                         (localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')).access_token : null);

            if (!token) {
                alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                return;
            }

            try {
                const response = await fetch(`http://localhost:8000/api/admin/categories/${categoryId}`, {
                    method: 'DELETE',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                if (response.ok) {
                    const result = await response.json();
                    alert(result.message || 'ê²Œì‹œíŒì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    loadCategories();
                } else {
                    const errorData = await response.json();
                    alert(`ì‚­ì œ ì‹¤íŒ¨: ${errorData.detail || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`);
                }
            } catch (error) {
                console.error('ì¹´í…Œê³ ë¦¬ ì‚­ì œ ì‹¤íŒ¨:', error);
                alert('ê²Œì‹œíŒ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ===== ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ í•¨ìˆ˜ ë =====

        // ëŒ€ì‹œë³´ë“œ ë¡œë“œ
        async function loadDashboard() {
            const token = localStorage.getItem('access_token') ||
                         (localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')).access_token : null);

            try {
                const response = await fetch('http://localhost:8000/api/admin/dashboard', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    document.getElementById('totalUsers').textContent = data.total_users;
                    document.getElementById('newUsersToday').textContent = data.new_users_today;
                    document.getElementById('totalPosts').textContent = data.total_posts;
                    document.getElementById('newPostsToday').textContent = data.new_posts_today;
                    document.getElementById('pendingReports').textContent = data.pending_reports;
                    document.getElementById('activePartners').textContent = data.total_partners;
                }
            } catch (error) {
                console.error('ëŒ€ì‹œë³´ë“œ ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }

        // í˜„ì¬ ì„ íƒëœ íšŒì› ìœ í˜• (ì „ì—­ ë³€ìˆ˜)
        let currentUserType = 'all';
        let currentUserPage = 1;
        let usersPerPage = 50;
        let totalUsersCount = 0;
        let allUsersCache = []; // ì „ì²´ íšŒì› ë°ì´í„° ìºì‹œ

        // íšŒì› ìœ í˜• íƒ­ ì „í™˜
        function switchUserTypeTab(userType) {
            currentUserType = userType;
            currentUserPage = 1; // í˜ì´ì§€ë¥¼ 1ë¡œ ë¦¬ì…‹

            // íƒ­ í™œì„±í™” ìƒíƒœ ë³€ê²½
            document.querySelectorAll('.user-type-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`.user-type-tab[data-type="${userType}"]`).classList.add('active');

            // ê°€ìƒíšŒì› íƒ­ì¼ ë•Œë§Œ ë¹„ë°€ë²ˆí˜¸ ì •ë³´ í‘œì‹œ
            const passwordInfo = document.getElementById('virtualPasswordInfo');
            if (userType === 'virtual') {
                passwordInfo.style.display = 'block';
            } else {
                passwordInfo.style.display = 'none';
            }

            // íšŒì› ëª©ë¡ ë‹¤ì‹œ ë¡œë“œ
            loadUsers();
        }

        // íšŒì› ëª©ë¡ ë¡œë“œ
        async function loadUsers() {
            const token = localStorage.getItem('access_token') ||
                         (localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')).access_token : null);

            try {
                // ì„œë²„ ì‚¬ì´ë“œ í˜ì´ì§€ë„¤ì´ì…˜: skipê³¼ limit ì‚¬ìš©
                const skip = (currentUserPage - 1) * usersPerPage;
                let countUrl = 'http://localhost:8000/api/admin/users/count';
                let usersUrl = `http://localhost:8000/api/admin/users?skip=${skip}&limit=${usersPerPage}`;

                if (currentUserType !== 'all') {
                    countUrl += `?user_type=${currentUserType}`;
                    usersUrl += `&user_type=${currentUserType}`;
                }

                // ì´ íšŒì› ìˆ˜ ì¡°íšŒ
                const countResponse = await fetch(countUrl, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                if (!countResponse.ok) {
                    throw new Error('Failed to fetch user count');
                }

                const countData = await countResponse.json();
                totalUsersCount = countData.total;

                // ê´€ë¦¬ì/ìŠ¤íƒ­ íƒ­ì˜ ê²½ìš° ì¶”ê°€ í•„í„°ë§ í•„ìš”
                if (currentUserType === 'admin') {
                    // admin user_typeë§Œ ìš”ì²­í•˜ë©´ ADMINê³¼ STAFFê°€ í•¨ê»˜ ì¡°íšŒë¨
                    totalUsersCount = countData.total;
                }

                // íšŒì› ëª©ë¡ ì¡°íšŒ
                const response = await fetch(usersUrl, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                if (response.ok) {
                    let users = await response.json();

                    // ê´€ë¦¬ì/ìŠ¤íƒ­ íƒ­ì¸ ê²½ìš° í´ë¼ì´ì–¸íŠ¸ì—ì„œ í•„í„°ë§ (ëŒ€ì†Œë¬¸ì êµ¬ë¶„ ì—†ì´)
                    if (currentUserType === 'admin') {
                        users = users.filter(u => {
                            const ut = (u.user_type || '').toUpperCase();
                            return ut === 'ADMIN' || ut === 'STAFF';
                        });
                    }

                    // í˜ì´ì§• UI ì—…ë°ì´íŠ¸
                    updateUsersPagination();

                    const tbody = document.getElementById('usersTableBody');

                    // ì—­í•  í•œê¸€ í‘œì‹œ ë§¤í•‘
                    const roleLabels = {
                        'admin': 'ê´€ë¦¬ì',
                        'staff': 'ìŠ¤íƒ­',
                        'premium': 'íŠ¹ë³„íšŒì›',
                        'user': 'ì¼ë°˜íšŒì›',
                        'ADMIN': 'ê´€ë¦¬ì',
                        'STAFF': 'ìŠ¤íƒ­',
                        'PREMIUM': 'íŠ¹ë³„íšŒì›',
                        'USER': 'ì¼ë°˜íšŒì›'
                    };

                    // íšŒì› ìœ í˜• í•œê¸€ í‘œì‹œ ë§¤í•‘
                    const userTypeLabels = {
                        'admin': 'ê´€ë¦¬ì',
                        'staff': 'ìŠ¤íƒ­',
                        'virtual': 'ê°€ìƒíšŒì›',
                        'real': 'ì‹¤ì œíšŒì›'
                    };

                    // ì—­í• ë³„ ë°°ì§€ ìƒ‰ìƒ
                    const roleBadgeClass = {
                        'admin': 'badge-deleted',     // ë¹¨ê°„ìƒ‰
                        'staff': 'badge-pending',     // ì£¼í™©ìƒ‰
                        'premium': 'badge-published', // íŒŒë€ìƒ‰
                        'user': 'badge-normal',       // íšŒìƒ‰
                        'ADMIN': 'badge-deleted',
                        'STAFF': 'badge-pending',
                        'PREMIUM': 'badge-published',
                        'USER': 'badge-normal'
                    };

                    // íšŒì› ìœ í˜•ë³„ ë°°ì§€ ìƒ‰ìƒ
                    const userTypeBadgeClass = {
                        'admin': 'badge-deleted',      // ë¹¨ê°„ìƒ‰
                        'staff': 'badge-pending',      // ì£¼í™©ìƒ‰
                        'virtual': 'badge-normal',     // íšŒìƒ‰
                        'real': 'badge-published'      // íŒŒë€ìƒ‰
                    };

                    // ê°€ìƒíšŒì› íƒ­ì¸ ê²½ìš° í…Œì´ë¸” í—¤ë” ë³€ê²½
                    const tableHead = document.getElementById('usersTableHead');
                    if (currentUserType === 'virtual') {
                        tableHead.innerHTML = `
                            <tr>
                                <th style="width: 40px;">ID</th>
                                <th style="width: 120px;">ì´ë©”ì¼</th>
                                <th style="width: 80px;">í•œê¸€ ë‹‰ë„¤ì„</th>
                                <th style="width: 80px;">ëŸ¬ì‹œì•„ì–´ ë‹‰ë„¤ì„</th>
                                <th style="width: 60px;">ë¯¼ì¡±</th>
                                <th style="width: 40px;">ë‚˜ì´</th>
                                <th style="width: 50px;">ì„±ë³„</th>
                                <th style="width: 80px;">ì§ì—…</th>
                                <th style="width: 60px;">í™œë™ìˆ˜ì¤€</th>
                                <th style="width: 80px;">ê²Œì‹œìŠ¤íƒ€ì¼</th>
                                <th style="width: 50px;">í•œêµ­ì–´</th>
                                <th style="width: 50px;">ëŸ¬ì‹œì•„ì–´</th>
                                <th style="width: 60px;">ìƒíƒœ</th>
                                <th style="width: 100px;">ì‘ì—…</th>
                            </tr>
                        `;
                    } else {
                        tableHead.innerHTML = `
                            <tr>
                                <th style="width: 50px;">ID</th>
                                <th style="width: 150px;">ì´ë©”ì¼</th>
                                <th style="width: 100px;">í•œê¸€ ë‹‰ë„¤ì„</th>
                                <th style="width: 100px;">ëŸ¬ì‹œì•„ì–´ ë‹‰ë„¤ì„</th>
                                <th style="width: 70px;">ê¶Œí•œ</th>
                                <th style="width: 80px;">íšŒì›ìœ í˜•</th>
                                <th style="width: 70px;">ìƒíƒœ</th>
                                <th style="width: 100px;">ê°€ì…ì¼</th>
                                <th style="width: 120px;">ì‘ì—…</th>
                            </tr>
                        `;
                    }

                    // ë¯¼ì¡± í•œê¸€ í‘œì‹œ
                    const ethnicityLabels = {
                        'KOREAN': 'í•œêµ­ì¸',
                        'KOREAN_RUSSIAN': 'êµí¬',
                        'RUSSIAN': 'ëŸ¬ì‹œì•„ì¸'
                    };

                    // ì„±ë³„ í•œê¸€ í‘œì‹œ
                    const genderLabels = {
                        'male': 'ë‚¨ì„±',
                        'female': 'ì—¬ì„±'
                    };

                    // í™œë™ìˆ˜ì¤€ í•œê¸€ í‘œì‹œ
                    const activityLabels = {
                        'high': 'ë†’ìŒ',
                        'medium': 'ì¤‘ê°„',
                        'low': 'ë‚®ìŒ'
                    };

                    tbody.innerHTML = users.map(user => {
                        // ê°€ìƒíšŒì› íƒ­ì¸ ê²½ìš° í˜ë¥´ì†Œë‚˜ ì •ë³´ í‘œì‹œ
                        if (currentUserType === 'virtual') {
                            let interests = '-';
                            try {
                                if (user.persona_interests) {
                                    const interestsArray = typeof user.persona_interests === 'string' ?
                                        JSON.parse(user.persona_interests) : user.persona_interests;
                                    interests = interestsArray.slice(0, 2).join(', ') +
                                               (interestsArray.length > 2 ? '...' : '');
                                }
                            } catch (e) {
                                interests = '-';
                            }

                            return `
                            <tr>
                                <td>${user.id}</td>
                                <td style="font-size: 12px;">${user.email}</td>
                                <td>${user.nickname_ko || user.nickname}</td>
                                <td>${user.nickname_ru || user.nickname}</td>
                                <td>${ethnicityLabels[user.ethnicity] || user.ethnicity || '-'}</td>
                                <td>${user.persona_age || '-'}</td>
                                <td>${genderLabels[user.persona_gender] || user.persona_gender || '-'}</td>
                                <td style="font-size: 12px;">${user.persona_occupation || '-'}</td>
                                <td>${activityLabels[user.persona_activity_level] || user.persona_activity_level || '-'}</td>
                                <td style="font-size: 12px;">${user.persona_posting_style || '-'}</td>
                                <td style="font-size: 11px;">${user.persona_korean_level || '-'}</td>
                                <td style="font-size: 11px;">${user.persona_russian_level || '-'}</td>
                                <td><span class="status-badge ${user.is_active ? 'badge-normal' : 'badge-deleted'}">${user.is_active ? 'í™œì„±' : 'ë¹„í™œì„±'}</span></td>
                                <td>
                                    <button class="action-btn" onclick="toggleUserActive(${user.id}, ${user.is_active})">
                                        ${user.is_active ? 'ë¹„í™œì„±í™”' : 'í™œì„±í™”'}
                                    </button>
                                </td>
                            </tr>
                            `;
                        } else {
                            // ì¼ë°˜ íšŒì› í‘œì‹œ (ê´€ì‹¬ì‚¬ ì œì™¸, ë‘ ë‹‰ë„¤ì„ í‘œì‹œ)
                            return `
                            <tr>
                                <td>${user.id}</td>
                                <td>${user.email}</td>
                                <td>${user.nickname_ko || user.nickname}</td>
                                <td>${user.nickname_ru || user.nickname}</td>
                                <td><span class="status-badge ${roleBadgeClass[user.role] || 'badge-normal'}">${roleLabels[user.role] || user.role}</span></td>
                                <td><span class="status-badge ${userTypeBadgeClass[user.user_type] || 'badge-normal'}">${userTypeLabels[user.user_type] || user.user_type || '-'}</span></td>
                                <td><span class="status-badge ${user.is_active ? 'badge-normal' : 'badge-deleted'}">${user.is_active ? 'í™œì„±' : 'ë¹„í™œì„±'}</span></td>
                                <td>${new Date(user.created_at).toLocaleDateString()}</td>
                                <td>
                                    <button class="action-btn" onclick="toggleUserActive(${user.id}, ${user.is_active})">
                                        ${user.is_active ? 'ë¹„í™œì„±í™”' : 'í™œì„±í™”'}
                                    </button>
                                </td>
                            </tr>
                            `;
                        }
                    }).join('');
                }
            } catch (error) {
                console.error('íšŒì› ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }

        // í˜ì´ì§• ì •ë³´ ì—…ë°ì´íŠ¸ (ê°„ì†Œí™”)
        function updateUsersPagination() {
            const totalPages = Math.ceil(totalUsersCount / usersPerPage);

            // UI ì—…ë°ì´íŠ¸
            document.getElementById('totalUsers').textContent = totalUsersCount;
            document.getElementById('currentPage').textContent = currentUserPage;
            document.getElementById('totalPages').textContent = totalPages;

            const rangeStart = totalUsersCount === 0 ? 0 : (currentUserPage - 1) * usersPerPage + 1;
            const rangeEnd = Math.min(currentUserPage * usersPerPage, totalUsersCount);
            document.getElementById('currentRangeStart').textContent = rangeStart;
            document.getElementById('currentRangeEnd').textContent = rangeEnd;

            // í˜ì´ì§€ ë²ˆí˜¸ ë²„íŠ¼ ìƒì„± (ìµœëŒ€ 10ê°œ)
            const pageNumbers = document.getElementById('pageNumbers');
            pageNumbers.innerHTML = '';

            const maxPageButtons = 10;
            let startPage = Math.max(1, currentUserPage - Math.floor(maxPageButtons / 2));
            let endPage = Math.min(totalPages, startPage + maxPageButtons - 1);

            if (endPage - startPage < maxPageButtons - 1) {
                startPage = Math.max(1, endPage - maxPageButtons + 1);
            }

            for (let i = startPage; i <= endPage; i++) {
                const btn = document.createElement('button');
                btn.textContent = i;
                btn.className = 'action-btn';
                btn.style.padding = '8px 12px';
                btn.style.minWidth = '40px';
                btn.style.fontSize = '14px';

                if (i === currentUserPage) {
                    btn.style.background = 'var(--admin-primary)';
                    btn.style.color = 'white';
                    btn.style.fontWeight = 'bold';
                }

                btn.onclick = () => goToUserPage(i);
                pageNumbers.appendChild(btn);
            }

            // ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™”
            document.getElementById('firstPageBtn').disabled = currentUserPage === 1;
            document.getElementById('prevPageBtn').disabled = currentUserPage === 1;
            document.getElementById('nextPageBtn').disabled = currentUserPage === totalPages;
            document.getElementById('lastPageBtn').disabled = currentUserPage === totalPages;
        }

        // íŠ¹ì • í˜ì´ì§€ë¡œ ì´ë™
        function goToUserPage(page) {
            if (page === 'last') {
                const totalPages = Math.ceil(totalUsersCount / usersPerPage);
                currentUserPage = totalPages;
            } else {
                currentUserPage = page;
            }
            loadUsers();
        }

        // ì´ì „ í˜ì´ì§€ë¡œ ì´ë™
        function goToPreviousUserPage() {
            if (currentUserPage > 1) {
                currentUserPage--;
                loadUsers();
            }
        }

        // ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™
        function goToNextUserPage() {
            const totalPages = Math.ceil(totalUsersCount / usersPerPage);
            if (currentUserPage < totalPages) {
                currentUserPage++;
                loadUsers();
            }
        }

        // ê²Œì‹œê¸€ ëª©ë¡ ë¡œë“œ
        async function loadPosts() {
            const token = localStorage.getItem('access_token') ||
                         (localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')).access_token : null);

            try {
                const response = await fetch('http://localhost:8000/api/admin/posts', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                if (response.ok) {
                    const posts = await response.json();
                    const tbody = document.getElementById('postsTableBody');
                    tbody.innerHTML = posts.map(post => `
                        <tr>
                            <td>${post.id}</td>
                            <td>${post.category_id}</td>
                            <td style="text-align: left;">${post.title}</td>
                            <td>${post.author_id}</td>
                            <td>${post.views || 0}</td>
                            <td>${new Date(post.created_at).toLocaleDateString()}</td>
                            <td>
                                <button class="action-btn btn-delete" onclick="deletePost(${post.id})">ì‚­ì œ</button>
                            </td>
                        </tr>
                    `).join('');
                }
            } catch (error) {
                console.error('ê²Œì‹œê¸€ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }

        // íšŒì› í™œì„±/ë¹„í™œì„± í† ê¸€
        async function toggleUserActive(userId, isActive) {
            const token = localStorage.getItem('access_token') ||
                         (localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')).access_token : null);

            if (!confirm(`ì´ íšŒì›ì„ ${isActive ? 'ë¹„í™œì„±í™”' : 'í™œì„±í™”'}í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) return;

            try {
                const response = await fetch(`http://localhost:8000/api/admin/users/${userId}/toggle-active`, {
                    method: 'PATCH',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                if (response.ok) {
                    alert('ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    loadUsers();
                }
            } catch (error) {
                console.error('íšŒì› ìƒíƒœ ë³€ê²½ ì‹¤íŒ¨:', error);
                alert('ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ê²Œì‹œê¸€ ì‚­ì œ
        async function deletePost(postId) {
            const token = localStorage.getItem('access_token') ||
                         (localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')).access_token : null);

            if (!confirm(`ê²Œì‹œê¸€ #${postId}ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) return;

            try {
                const response = await fetch(`http://localhost:8000/api/admin/posts/${postId}`, {
                    method: 'DELETE',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                if (response.ok) {
                    alert('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    loadPosts();
                }
            } catch (error) {
                console.error('ê²Œì‹œê¸€ ì‚­ì œ ì‹¤íŒ¨:', error);
                alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // íšŒì› ê²€ìƒ‰
        function searchUsers() {
            loadUsers(); // ì‹¤ì œë¡œëŠ” ê²€ìƒ‰ íŒŒë¼ë¯¸í„°ë¥¼ ì¶”ê°€í•´ì•¼ í•¨
        }

        // íšŒì› í•„í„°
        function filterUsers() {
            loadUsers(); // ì‹¤ì œë¡œëŠ” í•„í„° íŒŒë¼ë¯¸í„°ë¥¼ ì¶”ê°€í•´ì•¼ í•¨
        }

        // ê²Œì‹œê¸€ ê²€ìƒ‰
        function searchPosts() {
            loadPosts(); // ì‹¤ì œë¡œëŠ” ê²€ìƒ‰ íŒŒë¼ë¯¸í„°ë¥¼ ì¶”ê°€í•´ì•¼ í•¨
        }

        // ê²Œì‹œê¸€ í•„í„°
        function filterPosts() {
            loadPosts(); // ì‹¤ì œë¡œëŠ” í•„í„° íŒŒë¼ë¯¸í„°ë¥¼ ì¶”ê°€í•´ì•¼ í•¨
        }

        // ê²Œì‹œê¸€ ì‚­ì œ
        function handleDeletePost(postId) {
            if (confirm(`ê²Œì‹œê¸€ #${postId}ì„(ë¥¼) ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‚­ì œëœ ê²Œì‹œê¸€ì€ "ì‚­ì œëœ ê²Œì‹œê¸€" íƒ­ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`)) {
                alert(`ê²Œì‹œê¸€ #${postId}ì´(ê°€) ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`);
                // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œí•˜ì—¬ ì‚­ì œ ì²˜ë¦¬
                // ì‚­ì œ í›„ í•´ë‹¹ í–‰ì„ "ì‚­ì œëœ ê²Œì‹œê¸€" íƒ­ìœ¼ë¡œ ì´ë™
                location.reload();
            }
        }

        // ëŒ“ê¸€ ì‚­ì œ
        function handleDeleteComment(commentId) {
            if (confirm(`ëŒ“ê¸€ #${commentId}ì„(ë¥¼) ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‚­ì œëœ ëŒ“ê¸€ì€ "ì‚­ì œëœ ëŒ“ê¸€" íƒ­ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`)) {
                alert(`ëŒ“ê¸€ #${commentId}ì´(ê°€) ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`);
                // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œí•˜ì—¬ ì‚­ì œ ì²˜ë¦¬
                location.reload();
            }
        }

        // ì‹ ê³  ë¬´ì‹œ
        function handleIgnoreReport(id, type) {
            const typeName = type === 'post' ? 'ê²Œì‹œê¸€' : 'ëŒ“ê¸€';
            if (confirm(`${typeName} #${id}ì˜ ì‹ ê³ ë¥¼ ë¬´ì‹œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\në¬´ì‹œëœ ì‹ ê³ ëŠ” ë” ì´ìƒ í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.`)) {
                alert(`${typeName} #${id}ì˜ ì‹ ê³ ê°€ ë¬´ì‹œë˜ì—ˆìŠµë‹ˆë‹¤.`);
                // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œí•˜ì—¬ ì‹ ê³  ë¬´ì‹œ ì²˜ë¦¬
                location.reload();
            }
        }

        // ê²Œì‹œê¸€ ë³µêµ¬
        function handleRestorePost(postId) {
            if (confirm(`ê²Œì‹œê¸€ #${postId}ì„(ë¥¼) ë³µêµ¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\në³µêµ¬ëœ ê²Œì‹œê¸€ì€ ë‹¤ì‹œ ê²Œì‹œíŒì— í‘œì‹œë©ë‹ˆë‹¤.`)) {
                alert(`ê²Œì‹œê¸€ #${postId}ì´(ê°€) ë³µêµ¬ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œí•˜ì—¬ ë³µêµ¬ ì²˜ë¦¬
                location.reload();
            }
        }

        // ëŒ“ê¸€ ë³µêµ¬
        function handleRestoreComment(commentId) {
            if (confirm(`ëŒ“ê¸€ #${commentId}ì„(ë¥¼) ë³µêµ¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\në³µêµ¬ëœ ëŒ“ê¸€ì€ ë‹¤ì‹œ ê²Œì‹œê¸€ì— í‘œì‹œë©ë‹ˆë‹¤.`)) {
                alert(`ëŒ“ê¸€ #${commentId}ì´(ê°€) ë³µêµ¬ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œí•˜ì—¬ ë³µêµ¬ ì²˜ë¦¬
                location.reload();
            }
        }

        // ===== ì‹œìŠ¤í…œ ì„¤ì • ê´€ë ¨ í•¨ìˆ˜ =====

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹œìŠ¤í…œ ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸°
        async function loadSystemSettings() {
            try {
                const token = localStorage.getItem('access_token') ||
                             (localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')).access_token : null);

                if (!token) {
                    console.error('ì¸ì¦ í† í°ì´ ì—†ìŠµë‹ˆë‹¤');
                    return;
                }

                const API_BASE = 'http://localhost:8000';
                const response = await fetch(`${API_BASE}/api/admin/settings?category=translation`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                if (response.ok) {
                    const settings = await response.json();

                    // ë²ˆì—­ ì œê³µì ì„¤ì •
                    const providerSetting = settings.find(s => s.key === 'translation_provider');
                    if (providerSetting) {
                        document.getElementById('translationProvider').value = providerSetting.value;
                    }

                    // DeepL API Key ì„¤ì •
                    const deeplKeySetting = settings.find(s => s.key === 'deepl_api_key');
                    if (deeplKeySetting) {
                        document.getElementById('deeplApiKey').value = deeplKeySetting.value;
                    }
                } else {
                    console.error('ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:', response.status);
                }
            } catch (error) {
                console.error('ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸° ì˜¤ë¥˜:', error);
            }
        }

        // DeepL ì„¤ì • ì €ì¥
        async function saveDeepLSettings() {
            const apiKey = document.getElementById('deeplApiKey').value.trim();
            const provider = document.getElementById('translationProvider').value;

            if (!apiKey) {
                alert('DeepL API Keyë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            try {
                const token = localStorage.getItem('access_token') ||
                             (localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')).access_token : null);

                if (!token) {
                    alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                    return;
                }

                const API_BASE = 'http://localhost:8000';

                // DeepL API Key ì €ì¥
                const deeplResponse = await fetch(`${API_BASE}/api/admin/settings/deepl_api_key`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({ value: apiKey })
                });

                // Translation Provider ì €ì¥
                const providerResponse = await fetch(`${API_BASE}/api/admin/settings/translation_provider`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({ value: provider })
                });

                if (deeplResponse.ok && providerResponse.ok) {
                    const statusDiv = document.getElementById('deeplStatus');
                    statusDiv.style.display = 'block';
                    statusDiv.style.background = '#d4edda';
                    statusDiv.style.color = '#155724';
                    statusDiv.style.border = '1px solid #c3e6cb';
                    statusDiv.innerHTML = 'âœ… DeepL ì„¤ì •ì´ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!';

                    setTimeout(() => {
                        statusDiv.style.display = 'none';
                    }, 3000);
                } else {
                    throw new Error('ì„¤ì • ì €ì¥ ì‹¤íŒ¨');
                }
            } catch (error) {
                console.error('ì„¤ì • ì €ì¥ ì˜¤ë¥˜:', error);
                const statusDiv = document.getElementById('deeplStatus');
                statusDiv.style.display = 'block';
                statusDiv.style.background = '#f8d7da';
                statusDiv.style.color = '#721c24';
                statusDiv.style.border = '1px solid #f5c6cb';
                statusDiv.innerHTML = 'âŒ ì„¤ì • ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message;
            }
        }

        // DeepL ì—°ê²° í…ŒìŠ¤íŠ¸
        async function testDeepLConnection() {
            const apiKey = document.getElementById('deeplApiKey').value.trim();

            if (!apiKey) {
                alert('DeepL API Keyë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ë¨¼ì € ì €ì¥
            await saveDeepLSettings();

            const statusDiv = document.getElementById('deeplStatus');
            statusDiv.style.display = 'block';
            statusDiv.style.background = '#d1ecf1';
            statusDiv.style.color = '#0c5460';
            statusDiv.style.border = '1px solid #bee5eb';
            statusDiv.innerHTML = 'ğŸ”„ DeepL API ì—°ê²°ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì¤‘...';

            const API_BASE = 'http://localhost:8000';
            const token = localStorage.getItem('access_token') ||
                         (localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')).access_token : null);

            if (!token) {
                statusDiv.style.background = '#f8d7da';
                statusDiv.style.color = '#721c24';
                statusDiv.style.border = '1px solid #f5c6cb';
                statusDiv.innerHTML = 'âŒ ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.';
                return;
            }

            try {
                // ë°±ì—”ë“œ APIë¥¼ í†µí•´ í…ŒìŠ¤íŠ¸
                const response = await fetch(`${API_BASE}/api/admin/test-deepl`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    statusDiv.style.background = '#d4edda';
                    statusDiv.style.color = '#155724';
                    statusDiv.style.border = '1px solid #c3e6cb';
                    statusDiv.innerHTML = `âœ… DeepL API ì—°ê²° ì„±ê³µ!<br>í…ŒìŠ¤íŠ¸ ë²ˆì—­: "${data.test_translation.original}" â†’ "${data.test_translation.translated}"`;
                } else if (response.status === 403) {
                    statusDiv.style.background = '#f8d7da';
                    statusDiv.style.color = '#721c24';
                    statusDiv.style.border = '1px solid #f5c6cb';
                    statusDiv.innerHTML = 'âŒ API Keyê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. DeepL Pro API Keyë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.';
                } else {
                    const errorData = await response.json();
                    statusDiv.style.background = '#f8d7da';
                    statusDiv.style.color = '#721c24';
                    statusDiv.style.border = '1px solid #f5c6cb';
                    statusDiv.innerHTML = `âŒ DeepL API ì˜¤ë¥˜ (${response.status}): ${errorData.detail || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`;
                }
            } catch (error) {
                statusDiv.style.background = '#f8d7da';
                statusDiv.style.color = '#721c24';
                statusDiv.style.border = '1px solid #f5c6cb';
                statusDiv.innerHTML = 'âŒ ì—°ê²° ì‹¤íŒ¨: ' + error.message;
            }
        }

        // ì‹œìŠ¤í…œ ì„¤ì • íƒ­ í‘œì‹œ ì‹œ ì„¤ì • ë¡œë“œ
        const originalShowTab = showTab;
        showTab = function(tabId) {
            originalShowTab(tabId);
            if (tabId === 'system-settings') {
                loadSystemSettings();
            }
        };

        // í˜ë¥´ì†Œë‚˜ ëª¨ë‹¬ í‘œì‹œ
        function showPersonaModal(userId, nickname, userData) {
            const modal = document.getElementById('personaModal');
            const user = userData;

            // ë¯¼ì¡± ë¼ë²¨
            const ethnicityLabels = {
                'korean': 'í•œêµ­ì¸',
                'korean_russian': 'ê³ ë ¤ì¸(êµí¬)',
                'russian': 'ëŸ¬ì‹œì•„ì¸'
            };

            // ê´€ì‹¬ì‚¬ íŒŒì‹±
            let interests = [];
            try {
                interests = user.persona_interests ? JSON.parse(user.persona_interests) : [];
            } catch(e) {
                interests = user.persona_interests ? [user.persona_interests] : [];
            }

            // ëª¨ë‹¬ ë‚´ìš© êµ¬ì„±
            document.getElementById('personaNickname').textContent = nickname;
            document.getElementById('personaContent').innerHTML = `
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div>
                        <div style="font-weight: 600; color: #666; margin-bottom: 5px;">ë¯¼ì¡±</div>
                        <div style="font-size: 14px;">${ethnicityLabels[user.ethnicity] || user.ethnicity || '-'}</div>
                    </div>
                    <div>
                        <div style="font-weight: 600; color: #666; margin-bottom: 5px;">ì„±ë³„</div>
                        <div style="font-size: 14px;">${user.persona_gender === 'male' ? 'ë‚¨ì„±' : user.persona_gender === 'female' ? 'ì—¬ì„±' : '-'}</div>
                    </div>
                    <div>
                        <div style="font-weight: 600; color: #666; margin-bottom: 5px;">ë‚˜ì´</div>
                        <div style="font-size: 14px;">${user.persona_age || '-'}ì„¸</div>
                    </div>
                    <div>
                        <div style="font-weight: 600; color: #666; margin-bottom: 5px;">ì§ì—…</div>
                        <div style="font-size: 14px;">${user.persona_occupation || '-'}</div>
                    </div>
                    <div>
                        <div style="font-weight: 600; color: #666; margin-bottom: 5px;">í™œë™ìˆ˜ì¤€</div>
                        <div style="font-size: 14px;">${user.persona_activity_level === 'high' ? 'ë†’ìŒ' : user.persona_activity_level === 'medium' ? 'ë³´í†µ' : user.persona_activity_level === 'low' ? 'ë‚®ìŒ' : '-'}</div>
                    </div>
                    <div>
                        <div style="font-weight: 600; color: #666; margin-bottom: 5px;">ê²Œì‹œìŠ¤íƒ€ì¼</div>
                        <div style="font-size: 14px;">${user.persona_posting_style || '-'}</div>
                    </div>
                    <div>
                        <div style="font-weight: 600; color: #666; margin-bottom: 5px;">í•œêµ­ì–´ ìˆ˜ì¤€</div>
                        <div style="font-size: 14px;">${user.persona_korean_level || '-'}</div>
                    </div>
                    <div>
                        <div style="font-weight: 600; color: #666; margin-bottom: 5px;">ëŸ¬ì‹œì•„ì–´ ìˆ˜ì¤€</div>
                        <div style="font-size: 14px;">${user.persona_russian_level || '-'}</div>
                    </div>
                </div>
                <div style="margin-top: 15px;">
                    <div style="font-weight: 600; color: #666; margin-bottom: 5px;">ê´€ì‹¬ì‚¬</div>
                    <div style="display: flex; flex-wrap: wrap; gap: 5px;">
                        ${interests.map(i => `<span style="background: #f3f4f6; padding: 4px 10px; border-radius: 12px; font-size: 12px;">${i}</span>`).join('')}
                    </div>
                </div>
            `;

            modal.style.display = 'flex';
        }

        // í˜ë¥´ì†Œë‚˜ ëª¨ë‹¬ ë‹«ê¸°
        function closePersonaModal() {
            document.getElementById('personaModal').style.display = 'none';
        }

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        window.onclick = function(event) {
            const modal = document.getElementById('personaModal');
            if (event.target === modal) {
                closePersonaModal();
            }
        };
    </script>

    <!-- í˜ë¥´ì†Œë‚˜ ëª¨ë‹¬ -->
    <div id="personaModal" style="display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); align-items: center; justify-content: center;">
        <div style="background-color: white; padding: 30px; border-radius: 12px; width: 600px; max-width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 4px 20px rgba(0,0,0,0.2);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 2px solid #e5e7eb; padding-bottom: 15px;">
                <h3 style="margin: 0; font-size: 18px; color: var(--admin-primary);">
                    <span style="font-size: 24px;">ğŸ‘¤</span> í˜ë¥´ì†Œë‚˜: <span id="personaNickname"></span>
                </h3>
                <button onclick="closePersonaModal()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #999;">&times;</button>
            </div>
            <div id="personaContent">
            </div>
            <div style="margin-top: 20px; text-align: right;">
                <button onclick="closePersonaModal()" style="padding: 8px 20px; background: var(--admin-primary); color: white; border: none; border-radius: 4px; cursor: pointer;">
                    ë‹«ê¸°
                </button>
            </div>
        </div>
    </div>
</body>
</html>
